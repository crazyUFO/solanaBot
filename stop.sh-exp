#!/bin/bash
# 获取当前脚本所在目录
SCRIPT_DIR=$(cd "$(dirname "$0")" && pwd)
# 指定要运行的 Python 脚本路径
PYTHON_SCRIPT="$SCRIPT_DIR/client_child.py"

# 检查脚本是否已在运行
RUNNING_PID=$(ps -ef | grep "[p]ython $PYTHON_SCRIPT" | awk '{print $2}')

if [ -n "$RUNNING_PID" ]; then
    echo "脚本已经在运行，进程 PID: $RUNNING_PID，正在杀死进程..."
    # 杀死当前运行的脚本进程
    kill -9 "$RUNNING_PID"
    if [ $? -eq 0 ]; then
        echo "脚本进程已被杀死，PID: $RUNNING_PID"
    else
        echo "无法杀死脚本进程: $RUNNING_PID"
        exit 1
    fi
fi

